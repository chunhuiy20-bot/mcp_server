{
  "name": "chat_workflow",
  "description": "Generated by AI Innovation Lab",
  "state_schema": {
    "messages": {
      "type": "list",
      "reducer": "add_messages"
    },
    "intent": {
      "type": "str"
    }
  },
  "entry_point": "intention",
  "nodes": [
    {
      "name": "intention",
      "type": "llm",
      "config": {
        "model": "gpt-4",
        "temperature": 0.8,
        "system_prompt": "识别用户意图，当用户所task的的时候输出task，否则都是chat",
        "need_structure_output": true,
        "output_schema": {
          "__nested__": {},
          "intent": {
            "type": "str",
            "description": "输出chat或task，只能二选一"
          }
        }
      },
      "input_mapping": {
        "source": "messages"
      },
      "output_mapping": {
        "target": "intent"
      }
    },
    {
      "name": "chat",
      "type": "llm",
      "config": {
        "model": "gpt-4",
        "temperature": 0.7,
        "system_prompt": "你是一号chat智能体，和用户对话的时候，要先表明你是chat",
        "need_structure_output": false
      }
    },
    {
      "name": "task",
      "type": "llm",
      "config": {
        "model": "gpt-4",
        "temperature": 0.7,
        "system_prompt": "你是一号task智能体，和用户对话的时候，要先表明你是task",
        "need_structure_output": false
      }
    }
  ],
  "edges": [
    {
      "type": "conditional",
      "source": "intention",
      "conditions": [
        {
          "expression": "intent.intent == 'chat'",
          "target": "chat"
        },
        {
          "expression": "intent.intent == 'task'",
          "target": "task"
        }
      ],
      "default": "task"
    },
    {
      "type": "normal",
      "source": "chat",
      "target": "END"
    },
    {
      "type": "normal",
      "source": "task",
      "target": "END"
    }
  ]
}